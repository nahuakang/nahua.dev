<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
    <channel>
        <title>Posts on Nahua Kang</title>
        <link>/posts/</link>
        <description>Recent content in Posts on Nahua Kang</description>
        <generator>Hugo -- gohugo.io</generator>
        <language>en-us</language>
        <managingEditor>kangnahua [at] gmail dot com (Nahua Kang)</managingEditor>
        <webMaster>kangnahua [at] gmail dot com (Nahua Kang)</webMaster>
        <copyright>&lt;a href=&#34;https://creativecommons.org/licenses/by-nc/4.0/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;CC BY-NC 4.0&lt;/a&gt;</copyright>
        <lastBuildDate>Sun, 30 Aug 2020 19:01:38 +0200</lastBuildDate>
        <atom:link href="/posts/index.xml" rel="self" type="application/rss+xml" />
        
        <item>
            <title>Remake Our Self: My Path into Engineering from the Humanities</title>
            <link>/posts/2020/08/remake-our-self-my-path-into-engineering-from-the-humanities/</link>
            <pubDate>Sun, 30 Aug 2020 19:01:38 +0200</pubDate>
            <author>kangnahua [at] gmail dot com (Nahua Kang)</author>
            <guid>/posts/2020/08/remake-our-self-my-path-into-engineering-from-the-humanities/</guid>
            <description>This is a long, detailed, and brutally honest post in which I recount the failures that challenged me and the right choices I made that I am grateful for. It is written in self-reflection as well as self-meditation for a small circle of friends and acquaintances. Should you, a dear stranger, find any inspiration or consolation in my writing, I would feel a great sense of joy and achievement.
 I am writing this not for the eyes of the many, but for yours alone: for each of us is audience enough for the other.</description>
            <content type="html"><![CDATA[<p>This is a long, detailed, and brutally honest post in which I recount the failures that challenged me and the right choices I made that I am grateful for. It is written in self-reflection as well as self-meditation for a small circle of friends and acquaintances. Should you, a dear stranger, find any inspiration or consolation in my writing, I would feel a great sense of joy and achievement.</p>
<blockquote>
<p>I am writing this not for the eyes of the many, but for yours alone: for each of us is audience enough for the other.</p>
<p>&ndash; Epicurus</p>
</blockquote>
<hr>
<p>Thanks to Silicon Valley, software engineering is one of the most (excessively) glorified lines of work in the 21st century. More and more people every day are curious about entering software from other fields.</p>
<p>I started programming in April, 2016. I began my software internship in April 2020. In July, 2020, I officially became a junior software engineer and joined the ranks of life-long learners who play and toil in one of the most dynamic, ever-changing fields.</p>
<p>This blog post is written mostly for myself. With feedback from my closest friends, I hope it represents a sincere, candid account of all the failures I faced, the right actions I took, as well as the personality I display in my pursuit to find career fulfillment.</p>
<p>If there were any external motivations for this post, then it would be to share my conviction that, regardless of what career you are interested in, learning how to <strong>remake our <em>self</em></strong> by acquiring knowledge in unfamiliar territory and picking up new skills on the fly is one of the most essential skills we should learn today.</p>
<p>In another word, embrace knowledge that you are curious about, whether you studied it for your degree or not.</p>
<h2 id="back-to-the-origin">Back to the Origin</h2>
<p>My story began in the fall of 2006 when I entered one of the most prestigious high schools in Fujian, China with flying marks. In my city&rsquo;s annual high school entrance exam, I ranked as the top student in my middle school and among the top 30 best students. My blood was pumped with confidence and I felt I was a smart cookie destined for greatness.</p>

    <figure class="center" >
        <img src="/img/my_programming_story/hackers_and_painters.jpg"   style="height: 50vw; margin: 0 auto;"  />

        
            <figcaption class="center" >Hackers &amp; Painters</figcaption>
        
    </figure>


<p>Around this time, I developed an admiration for <strong>hackers</strong> after reading the Chinese translation of Eric S. Raymond&rsquo;s blog post, <a href="http://www.catb.org/esr/faqs/hacker-howto.html">How to Become a Hacker</a> and a few poorly translated chapters of Paul Graham&rsquo;s <a href="http://www.paulgraham.com/hp.html">Hackers and Painters</a>. A hacker&rsquo;s personality and character, as revealed by Raymond and Graham&rsquo;s writings, as well as the meritocratic nature of hacker communities deeply resonated with the yet-to-be-developed values I had. (<em>Note: Steven Levy&rsquo;s Hackers: Heroes of the Computer Revolution is a great book that I only encountered over a decade later.</em>).</p>
<p>With encouragement from my high school best friend who knew programming already, I signed up for a weekend Pascal crash course offered by my high school. As I entered a room full of blue DOS screens on a fateful, humid Saturday morning, I was frightened.</p>
<p>Having grown up in a family that did not allow much time to play on a computer, I could not even type properly with five fingers at that time, not to mention using a DOS and writing <code>if-else</code> statements or <code>for-loops</code> in a dreadful language called <strong>Turbo Pascal</strong>! What&rsquo;s worse was that <em>everyone except me</em> seemed to be able to follow the pace of the crash course!</p>

    <figure class="center" >
        <img src="/img/my_programming_story/turbo_pascal.png"   style="width: 50vw; margin: 0 auto;"  />

        
            <figcaption class="center" >Turbo Pascal DOS Interface</figcaption>
        
    </figure>


<p>For some reason, staring at that blue screen, I could not understand how a computer <em>thinks</em>. Nor could I write down any line of code to perform more than a standard:</p>
<pre><code class="language-pascal" data-lang="pascal">program Hello;
begin
  writeln ('Hello, world.');
end.
</code></pre><p>I felt nervous, my head sweating. The teacher asked us to solve some more basic problems, but my brain felt like a overcooked pot of porridge. I sat there, stupified and petrified, while all the other students coded away, sharing their excitement with each other.</p>
<p>By lunch break, I sneaked out of the classroom and went home. I felt awfully stupid among some of the best students in my city.</p>
<p>In the subsequent weeks, I tried <code>Java</code>, <code>C</code>, and <code>C++</code>, languages my cousin was learning for his CS program at a university. Yet each time I did not know even how to install the software for these languages on my father&rsquo;s Windows PC. I tried writing code on paper, but even the simplest <code>#include &lt;stdio.h&gt;</code> seemed way too complicated for me, not to mention the verbose <code>Java</code>.</p>
<p>And then, sometime sooner or later, I gave up and concluded that I was not made for programming. From that moment on, programming became a painful reminder of that awkward, humiliating morning and my fragile ego could not allow the acknowledgement that I was not as smart as I thought.</p>
<h2 id="how-i-started-learning-python">How I Started Learning Python</h2>
<p>Fast forward to a decade later in 2016, I had already completed a BA in history from Texas A&amp;M, with the prestigious <em>magna cum laude</em> and the key to <em>Phi Beta Kappa</em> honor society under my belt. Having no idea what to do with my life and with an aversion of preparing for the Law School Admission Test (LSAT), I was pursuing bachelor&rsquo;s studies in a prestigious business school in St. Gallen, Switzerland.</p>
<p>There, in that beautiful little Swiss town, I entered the most trying two years of my life. While my classmates were scoring interviews with the likes of UBS, Goldman Sachs, and McKinsey, I could not get a business internship either in Switzerland or Germany. In fact, from the numerous applications I sent out, I got only one interview and the company took the other candidate.</p>
<p>Nowhere. Stuck. I knew I missed something, but I could not tell what it was. Having been a star at Texas A&amp;M, I felt like a complete loser in Switzerland.</p>
<p>Out of sheer luck, I got in touch with a Frankfurt-based value investor, an alumnus who was kind enough to offer me some time to <em>chat</em>. We had a pleasant conversation over coffee in St. Gallen&rsquo;s Altstadt, during which, however, he quickly determined that I lacked all the necessary financial and accounting knowledge to work as an intern for his fund.</p>
<p>Sensing his acute yet accurate judgement, I asked out of desperation: &ldquo;<em>What kind of skills should I learn that would be valuable to your fund?</em>&rdquo;</p>
<p>He replied: &ldquo;<em>You could consider learning</em> <strong>Python</strong> <em>and</em> <strong>programming</strong> <em>for machine learning. Technology is coming into value investing as well now.</em>&rdquo;</p>
<p>I felt a knot in my stomach tying up instantly. Words could not describe my frustration and disappointment as I walked home. I called my girlfriend at the time with tears in my eyes, whining to her that the last thing in the world I would want to do is learning how to program again and this investor literally just told me I should learn <em>Python</em> for programming. Beaten and defeated, I went to bed early that day but could not fall asleep.</p>

    <figure class="center" >
        <img src="/img/my_programming_story/roggwiller.jpg"   style="width: 80vw; margin: 0 auto;"  />

        
            <figcaption class="center" >In Cafe Roggwiller, I sat with a kind investor in the middle lounge in the back of this photo when he told me to learn programming. I remember vividly how fear arose in me as I heard his advice.</figcaption>
        
    </figure>


<p>The next morning, still with cloud in my mind, I bit my teeth and searched for online courses that would teach me <code>Python</code>. I found a few free resources, managed to install <code>Python</code> on my Windows laptop, and started programming.</p>
<p>Immediately, I realized that something was different: I did not feel dumbfounded like I felt with <code>Pascal</code>, <code>C</code> or <code>C++</code>. There was no mysterious, magical, scret code flying around the text editor. It was simple. My hello world program (in <code>Python2</code> syntax) was 1 line:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#66d9ef">print</span> <span style="color:#e6db74">&#34;Hello, world.&#34;</span>
</code></pre></div><p>With still a lot of uncertainty and fear in me, I told myself that this time, I might actually get somewhere with <code>Python</code>. And that was the true story to how I started programming.</p>
<h2 id="coding-more-and-encountering-deep-learning">Coding More and Encountering Deep Learning</h2>
<p>I would like to sincerely thank Guido van Rossum and all the core <code>Python</code> developers because they created a beautiful language that is inviting to those of us who are frightened by <code>C++</code>.</p>
<p>After learning basic Python syntax and some programming concepts with the online book <a href="https://learnpythonthehardway.org/python3/">Learn Python the Hard Way</a> and Coursera&rsquo;s <a href="https://www.coursera.org/specializations/python">Python for Everybody</a>, I gained some confidence in programming. I switched my operating system from Windows to <a href="https://ubuntu.com/">Ubuntu</a>, a popular distro of Linux, as a gesture of committing to coding as a lifestyle.</p>
<p>I didn&rsquo;t fall in love with programming yet. Sometimes, when I encountered a new concept that I could not understand, my fear of computer from 2006 would arise again and I had to give myself time to calm down and get back at the computer screen.</p>
<p>But for a student who felt stuck in his self-pity and stagnated career path, programming was weirdly liberating. And so, even making a useless, buggy text-based game in the terminal was a lovely distraction for me from the boring Economics exams that I had to memorize for.</p>
<p>Without any deliberate purpose, I learned more and more, such as how to dual boot Ubuntu and Windows, how to use the terminal and commandline, and how to write a small script to <a href="https://github.com/nahuakang/python-mini-projects/blob/master/youtube-downloader.py">scrap search results from YouTube and download YouTube videos</a>. The more I wrote, the more fun programming became. I knew no one would use any of the programs I wrote, but I was proud of them anyways.</p>
<p>By the fall of 2016, I made a calculated move of not completing my studies in St. Gallen but instead began my master&rsquo;s studies in Stockholm School of Economics. On the one hand, I wanted to close a long-distance relationship, on the other, I hoped that Scandinavia might offer opportunities to my stagnated career development.</p>
<p>Being the only student in my program who could <em>script</em> in a general-purpose programming language, I went deeper and deeper into it. While my classmates were studying consulting cases, I hacked in my text editor and terminal to render a Hangman Game while learning how to modularize my code. While my classmates were partying and socializing in the evenings, I sat in a basement and continued learning with online math and programming courses. It brought me pride to be the only person who knew something about the magic in a computer among a bunch of business students.</p>

    <figure class="center" >
        <img src="/img/my_programming_story/malan.jpg"   style="width: 50vw; margin: 0 auto;"  />

        
            <figcaption class="center" >David Malan teaches the world&#39;s best made online course, CS50, an introduction to computer science. (Photo credit: New Yorker).</figcaption>
        
    </figure>


<p>Around this time, I completed <a href="https://courses.edx.org/courses/course-v1:MITx+6.00.1x+2T2017_2/course/">MIT&rsquo;s 6.00.1x and 6.00.2x</a> and started doing <a href="https://cs50.harvard.edu/web/2020/">Harvard&rsquo;s CS50 course</a>, of which I eventually completed 70% of the homework. I love CS50 and its people. To this day, it is still the single best online course of any kind and I recommended it to all my close friends who wished to learn programming.</p>
<p>Soon after, I also discovered Udacity&rsquo;s new program on <strong>Deep Learning</strong>. Having no clue what deep learning is, I signed up for the course because it sounded cool (nowadays you can learn with free resources like <a href="https://www.fast.ai/">fast.ai</a>). I learned about back propagation, convolutional neural networks, image classification, Long Short-Term Memory (LSTM), and Generative Adversarial Networks (GAN). None of that was easy and I definitely did not manage to do everything on my own. And wow! I could train a &ldquo;neural network&rdquo; to recognize digits in images!</p>
<p>Quite similar to my earliest experience with programming, I felt often dumbfounded with deep learning but I persisted because the subject was fascinating and because I thought I had no other competitive advantages.</p>
<h2 id="failures-after-failures-until-luck-struck">Failures After Failures, Until Luck Struck</h2>
<p>To digest my learnings better, I started to write blogs. I was honored that the two pieces I wrote on the basics of deep learning (<a href="https://towardsdatascience.com/introducing-deep-learning-and-neural-networks-deep-learning-for-rookies-1-bd68f9cf5883">post #1</a> and <a href="https://towardsdatascience.com/multi-layer-neural-networks-with-sigmoid-function-deep-learning-for-rookies-2-bf464f09eb7f">post #2</a>) invited over <strong>240K views</strong> in total. (<em>Note: I never found the time nor energy to complete the third blog on backpropagation. Here&rsquo;s an amazing <a href="https://colah.github.io/posts/2015-08-Backprop/">post on backpropagation</a> from Christoph Olah</em>).</p>
<p>These little successes boosted my confidence and I decided to look for interesting AI startups to apply for a <strong>product, marketing, or bizdev</strong> internship in Berlin. I thought about applying for engineering positions after reading <a href="https://www.roguelynn.com/words/my-path-into-engineering/">Lynn Root&rsquo;s story of her transition into engineering</a>, but I chickened out. Anyways, I reached out to all the startups I could find at the time.</p>
<p>The cycle repeated itself. I was either rejected or ignored.</p>
<p>I remember one startup that I applied to wrote back saying that they did not have a position suitable for me, yet I found out a month later that they hired another person from St. Gallen for a role that I was interested in. That hurt my pride in that moment but, in hindsight, never take these decisions personally. Startups tend to lack a large HR team to digest all the applications and sometimes, not being hired by the wrong employer is a good thing.</p>
<p>In my moments of frustration, Lady Fortuna befell on me. I reached out to Moritz, a complete stranger who at the time was the product owner of a deep learning startup, <a href="https://20bn.com/">TwentyBN</a>. By then, I had almost given up on finding an internship in Berlin and reached out only because Moritz&rsquo;s profile resembled mine and I thought I could seek some advice to my career path. I clicked the button on his LinkedIn profile and sent a short message.</p>

    <figure class="center" >
        <img src="/img/my_programming_story/linkedin_message.png"   style="width: 40vw; margin: 0 auto;"  />

        
            <figcaption class="center" >A simple LinkedIn message changed my life</figcaption>
        
    </figure>


<p>Little did I know that this message landed me an internship and a full-time job that eventually allowed and encouraged me to transit into software development. (<em>Note: In October 2017, before my internship with TwentyBN started, I briefly contributed to an open source project <a href="https://www.openmined.org/">OpenMined</a> in an attempt to gain more experience in software. That experience also scared me because I did not understand Git, Github, unit testing, and CI/CD. I paused it in the excuse of work until April, 2020 when I became a software intern at TwentyBN.</em>)</p>
<h2 id="dissatisfaction-with-career-path">Dissatisfaction with Career Path</h2>
<p>I worked for 2 years as a product marketer and not for even a day did I feel it was my mission call. I took the job because I fully believed in TwentyBN&rsquo;s people and our technology, but I <em>dislike</em> social media. I wanted to contribute to my company&rsquo;s success but never managed to change my mind about social media marketing. I did not grow much in this position and never felt fulfilled.</p>
<p>During this period of time, I went through an amicable breakup that nevertheless broke my heart. Moreover, I secretly felt my position was being marginalized in the company. My salary rose but deep in my mind, I was frustrated that I could not play a more meaningful role. That depressing feeling I experienced in Switzerland seemed to be rising again.</p>
<p>While a part of me continued to indulge myself in some ocassional evening coding sessions and nerdy programming languages activities, I did not consider software a possibility for me. And I felt I was already too old to go back to a junior position and start over again.</p>

    <figure class="center" >
        <img src="/img/my_programming_story/embodiedai.png"   style="width: 40vw; margin: 0 auto;"  />

        
            <figcaption class="center" >I tried to change my career by being proactive with marketing ideas. This is a screenshot of the newsletter I led.</figcaption>
        
    </figure>


<p>At work, I started writing and editing our company newsletter <a href="http://www.embodiedai.co/">Embodied AI</a>. In private, I started turning my reading list into book reviews and analysis on leadership in a newsletter called <a href="https://plutarch.substack.com/">Plutarch</a>.</p>
<p>With a desire to build a reputation of my writing, I started experimenting and trying to attract people to sign up for both newsletters. I tried all kinds of marketing channels, got banned by multiple Reddit subreddits, and eventually managed around <strong>500</strong> subscribers for Embodied AI and <strong>100</strong> subscribers for my personal newsletter.</p>
<p>With myself, I took a friend Chris&rsquo;s suggestion, overcame my gym-fear and started trying to weightlift and doing calisthenics, which was completely outside my comfort zone.</p>
<p>Fitness gave me dopamine and testosterone. But my newsletter attempts brought me no gratification. I continued and performed a variety of mini-experiments throughout a span of almost a year. Yet my career dissatisfaction continued.</p>
<h2 id="never-too-old-to-change-career">Never Too Old to Change Career</h2>
<p>Towards the end of 2019, my long dissatisfaction with work manifested into an existential crisis (the coronavirus in 2020 intensified this crisis).</p>
<p>I came to one grim conclusion: <strong>If I were to continue doing product marketing for another 10 years, I would end up hating myself for not taking any action.</strong></p>
<p>Again, this voice in my mind suggested software.</p>
<p>Already in 2018, I had wanted to ask TwentyBN for an internship as a deep learning engineering intern but I lacked the confidence to make the cut. And by the end of 2019, I heard enough success stories from acquaintances who landed software jobs after bootcamps that my desire to explore software engineering as a career re-kindled.</p>
<p>During my Christmas vacation back in China, I spent all the 3 weeks learning web development with <a href="https://cs50.harvard.edu/web/2020/">Harvard&rsquo;s CS50W</a>, coding from 8AM in the morning until 1 or 2AM in the night. I wanted to test myself with this intensive experience to see if I had it in me to be a programmer or if it were just a phase. The learning curve was steep and the great firewall prevented me from easy access to Google and StackOverflow. But I managed 2 buggy projects and learned some <code>Flask</code>, <code>Django</code>, <code>Javascript</code> and <code>WebSocket</code>.</p>

    <figure class="center" >
        <img src="/img/my_programming_story/programming_age.png"   style="width: 50vw; margin: 0 auto;"  />

        
            <figcaption class="center" >This story persuaded me that I am not too old to make the career switch into software.</figcaption>
        
    </figure>


<p>What was most transformational during these 3 weeks was that, for the first time in almost 14 years, I felt again I was <strong>in the zone</strong>. I was absorbed in programming. Throughout the day I was contemplating on solving the projects and problems. I even had 2-3 dreams during which I was finding solutions to my code.</p>
<p>And programming suited me way more than product marketing. By nature, marketing is a highly difficult line of work. Viral marketing and growth marketing are well-studied topics, but no one could say with 100% confidence if any single strategy or action was responsible for a product or a company&rsquo;s success.</p>
<p>Programming, however, is deadly logical. I was hooked into it because I enjoyed the instant gratification because, sometimes, even a single line of code change could result in a big visual difference. Bug-hunting, while sometimes tedious and frustrating, also gave me huge feelings of reward when I eventually debugged my code and consolidated my learning. This is way better than what I did in the past 2 years!</p>
<p>In the end, I worked so hard during those weeks that I did not hear about the COVID19 until I returned from China to Berlin.</p>
<p>Back at work, I decided that I was not too old to give software engineering a try. I managed to convince my boss Moritz, my Python teamleads, as well as my CTO Ingo to give me a three-month internship with pay reduction. Again, there were sleepless nights and numerous moments of head-banging. The paycut was manageable, but my nervousness of not making the cut and my <strong>imposter syndrome</strong> added a lot of pressure on my mind.</p>
<p>By now, however, my programming experience has taught me <strong>what my learning patterns are</strong> and I have become more patient with myself. I learned steadily, solved tickets, asked for help, and eventually, the internship turned into a new, full-time position.</p>
<h2 id="remake-our-self">Remake Our &ldquo;Self&rdquo;</h2>
<p>Having a family and good friends that unconditionally supported me helped. Having parents who value education and generously supported me in my worst moments helped. Having received a stranger&rsquo;s advice helped. Having learned programming and deep learning helped. Having been a history major with good writing skills helped. And having been on the same wavelength with my company&rsquo;s management and colleagues helped. All of that help was necessary.</p>
<p>But equally important, I also must thank Lady Fortuna for making me into <strong>a person who has the drive to learn new, seemingly daunting skills to re-make oneself with discipline and tenacity</strong>.  Without this habit of continuous learning, I could not have achieved what I want.</p>
<p>As you might tell, my learning journey as a software Padawan has only just begun. Software engineering is a dynamic and energetic field with many talented people and brilliant ideas. I am still learning how to write good software and how to work across multiple teams.</p>

    <figure class="center" >
        <img src="/img/my_programming_story/twentybn.jpg"   style="width: 50vw; margin: 0 auto;"  />

        
            <figcaption class="center" >TwentyBN and its amazing people</figcaption>
        
    </figure>


<p>In April, I have reconnected with the founder of the open source project <a href="https://www.openmined.org/">OpenMined</a>. I began contributing in my limited capacity again so that to give myself more exposure to other programming languages to hone my overall skillset as a developer. It has not been easy but the OpenMined community is an amazing bunch.</p>
<p>Additionally, there are knowledge gaps that I have to make up for, such as architecture design, pattern design, as well as well-known algorithms and data structures. I am well aware of these gaps and will continue working on them. After all, I signed up for a career that only works if I continue to learn.</p>
<h2 id="la-fin">La Fin</h2>
<p>Most of us will not have a straightforward career that soars like the rocket. Most of us are destined to encounter career deadlocks at one or another point in our lives. And most of us have the power to do something about it.</p>
<p>For me, that included almost a decade of switching majors and wondering what line of work I would be passionate about.</p>
<p>It involved facing setbacks and rejections every stop of my journey across United States and Europe. It involved failing a major in business administrations and flunked two exams for the first time in my life. It involved being unhappy about my career path for 2 years.</p>
<p>But like Dickens wrote, <strong>it was the worst of times, but it was also the best of times</strong>. Thanks to all the people who are or had been in my life, I survived. Failures challenged my understanding of my strengths and weaknesses, but none of them destroyed me.</p>
<p>Each time I was struck down, I cried a bit, rose up, and found consolation in learning new knowledge and acquiring new skills. There was no giving up.</p>
<p>Here I am today. A new journey just began and I am excited about all the exciting things I will learn along the journey. I am very confident that failures and rejections of all kinds will continue coming my way. I am sure I will have moments of weaknesses and feel defeated. But I have gone through plenty to know that I am strong enough to withstand all of them and continue remaking myself and my life.</p>
<p>I hid most of these failures from others in the past years. A part of me is still ashamed of them. But I decided to write them down as a form of self-reflection. Moreover, I know someone out there is going through similar experiences. Perhaps these words will help.</p>
<p>So here you go. This story is for you and I hope, despite its length, my history resonate with or inspire you so that you can eventually also remake your life. Good luck and never give up.</p>
]]></content>
        </item>
        
        <item>
            <title>Go Template: Using Execute vs. ExecuteTemplate</title>
            <link>/posts/2020/08/golang-template-execute-vs-executetemplate/</link>
            <pubDate>Fri, 28 Aug 2020 21:59:26 +0200</pubDate>
            <author>kangnahua [at] gmail dot com (Nahua Kang)</author>
            <guid>/posts/2020/08/golang-template-execute-vs-executetemplate/</guid>
            <description>Rendering the correct template is an important step in building a web application. If you are new to web programming in Go, chances are you might have come across two methods in the html/template package: func (*Template) Execute and func (*Template) ExecuteTemplate.
You might have also wondered: What are the differences between these two methods? The quick answer is to look up the official documentation:
 func (t *Template) Execute(wr io.</description>
            <content type="html"><![CDATA[<p>Rendering the correct template is an important step in building a web application. If you are new to web programming in Go, chances are you might have come across two methods in the <code>html/template</code> package: <a href="https://golang.org/pkg/html/template/#Template.Execute"><code>func (*Template) Execute</code></a> and <a href="https://golang.org/pkg/html/template/#Template.ExecuteTemplate"><code>func (*Template) ExecuteTemplate</code></a>.</p>
<p>You might have also wondered: What are the differences between these two methods? The quick answer is to look up the official documentation:</p>
<ul>
<li><code>func (t *Template) Execute(wr io.Writer, data interface{}) error</code>:
Execute applies a parsed template to the specified data object, writing the output to <code>wr</code>.</li>
<li><code>func (t *Template) ExecuteTemplate(wr io.Writer, name string, data interface{}) error</code>:
ExecuteTemplate applies the template associated with t that has the given name to the specified data object and writes the output to wr.</li>
</ul>
<p>I don&rsquo;t know about you, but while the Go documentation is well-written, I could not understand the differences, especially what <code>name string</code> is.</p>
<p>So read on to find out how these two methods differ and when to use them.</p>
<h2 id="setup">Setup</h2>
<p>To answer this question, let&rsquo;s take a look at a simple example. Suppose we have a very mini web app <code>app</code> in the following file structure:</p>
<pre><code>.
├── layouts
│   └── index.html
└── main.go
</code></pre><p>Inside <code>index.html</code> we have a very basic homepage:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html"><span style="color:#75715e">&lt;!-- app/layouts/index.html --&gt;</span>
&lt;<span style="color:#f92672">h1</span>&gt;Welcome to my Go Web App!&lt;/<span style="color:#f92672">h1</span>&gt;
</code></pre></div><h2 id="templateexecute">template.Execute</h2>
<p>To make this homepage appear on our localhost virtual server, we have to perform the following steps:</p>
<ol>
<li>Create a handler function, e.g. <code>index</code>, that would render <code>index.html</code></li>
<li>Register this handler <code>index</code> to our localhost server via <a href="https://golang.org/pkg/net/http/#HandleFunc"><code>http.HandleFunc</code></a></li>
<li>Start the server with <a href="https://golang.org/pkg/net/http/#ListenAndServe"><code>http.ListenAndServe</code></a> and listen on a port for requests</li>
</ol>
<p>Here&rsquo;s a generic boilerplate for our mini Go app with 1 route:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#75715e">// app/main.go
</span><span style="color:#75715e"></span>
<span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>

<span style="color:#f92672">import</span> (
	<span style="color:#e6db74">&#34;html/template&#34;</span>
	<span style="color:#e6db74">&#34;net/http&#34;</span>
)

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">index</span>(<span style="color:#a6e22e">w</span> <span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">ResponseWriter</span>, <span style="color:#a6e22e">r</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">Request</span>) {
	<span style="color:#a6e22e">t</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">template</span>.<span style="color:#a6e22e">ParseFiles</span>(<span style="color:#e6db74">&#34;layouts/index.html&#34;</span>)
	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
		panic(<span style="color:#a6e22e">err</span>)
	}
	<span style="color:#a6e22e">t</span>.<span style="color:#a6e22e">Execute</span>(<span style="color:#a6e22e">w</span>, <span style="color:#66d9ef">nil</span>)
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">HandleFunc</span>(<span style="color:#e6db74">&#34;/&#34;</span>, <span style="color:#a6e22e">index</span>)
	<span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">ListenAndServe</span>(<span style="color:#e6db74">&#34;:8080&#34;</span>, <span style="color:#66d9ef">nil</span>)
}
</code></pre></div><p>Notice that we are parsing one HTML file with <a href="https://golang.org/pkg/html/template/#ParseFiles"><code>template.ParseFiles</code></a>, with the parsed result returned as a <code>* Template</code> and assigned to our variable <code>t</code>. Because of this, we could immediately execute on the parsed template <code>t</code> and send its content as well as data (in this case <code>nil</code>, or none) to the <code>http.ResponseWriter</code>, which then displays the HTML content when localhost server responds to a request from us on the browser.</p>
<p>Inside your terminal, run the following command in your project&rsquo;s root directory and then type in <code>localhost:8080</code> in your browser, you should see this very simple app running:</p>
<pre><code class="language-console" data-lang="console">$ go run main.go
</code></pre><h2 id="expanding-our-mini-web-app">Expanding Our Mini Web App</h2>
<p>Imagine your mini web app has gained traction among users and now you want to refactor it so that you can build it in a more scalable manner. You looked around the app carefully and decides that, for each new page you create, you&rsquo;d want to add a header and a footer.</p>
<p>What&rsquo;s more, you want a base template <code>layout.html</code> that would include the header, the footer, and then render the content of any page based on the request. If a user requests <code>index.html</code>, they&rsquo;ll get it with the header and footer attached. If they decide to request a new <code>contact.html</code>, they&rsquo;ll get it with the header and footer attached as well.</p>
<p>Our app now looks like this:</p>
<pre><code class="language-console" data-lang="console">.
├── layouts
│   ├── contact.html
│   ├── footer.html
│   ├── header.html
│   ├── index.html
│   └── layout.html
└── main.go

</code></pre><p>So for our current <code>index.html</code>, we&rsquo;d have:</p>
<ul>
<li>Layout Template
<ul>
<li>Header Template</li>
<li>Content Template (of Index or of Contact)</li>
<li>Footer Template</li>
</ul>
</li>
</ul>
<p>How do we achieve this with HTML? Well, we can&rsquo;t easily, but Go&rsquo;s built-in template language helps us to organize our HTML pages nicely. To define a template is as simple as:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">{{ define &#34;templateName&#34;}}
  <span style="color:#75715e">&lt;!-- HTML code --&gt;</span>
{{ end }}
</code></pre></div><p>So we could define our basic header and footer templates as:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html"><span style="color:#75715e">&lt;!-- app/layouts/header.html --&gt;</span>
{{define &#34;header&#34;}}
&lt;<span style="color:#f92672">nav</span>&gt;Navbar&lt;/<span style="color:#f92672">nav</span>&gt;
{{end}}
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html"><span style="color:#75715e">&lt;!-- app/layouts/footer.html --&gt;</span>
{{define &#34;footer&#34;}}
&lt;<span style="color:#f92672">footer</span>&gt;Copyright 2020&lt;/<span style="color:#f92672">footer</span>&gt;
{{end}}
</code></pre></div><p>And let&rsquo;s move the HTML code in our <code>index.html</code> into a template definition as well:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html"><span style="color:#75715e">&lt;!-- app/layouts/index.html --&gt;</span>
{{define &#34;content&#34;}}
&lt;<span style="color:#f92672">h1</span>&gt;Welcome!&lt;/<span style="color:#f92672">h1</span>&gt;
{{end}}
</code></pre></div><p>To use a template, we simply insert it into a new layout template, but this time using the pattern:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html"><span style="color:#75715e">&lt;!-- app/layouts/layout.html --&gt;</span>
{{define &#34;layout&#34;}}

  {{template &#34;header&#34;}}

  {{template &#34;content&#34;}}

  {{template &#34;footer&#34;}}

{{end}}
</code></pre></div><p>Before we move on, let&rsquo;s create our contact page and modify our index page:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html"><span style="color:#75715e">&lt;!-- app/layouts/index.html --&gt;</span>
{{define &#34;content&#34;}}
&lt;<span style="color:#f92672">h1</span>&gt;Welcome!&lt;/<span style="color:#f92672">h1</span>&gt;
{{end}}
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html"><span style="color:#75715e">&lt;!-- app/layouts/contact.html --&gt;</span>
{{define &#34;content&#34;}}
&lt;<span style="color:#f92672">h1</span>&gt;Contact Us&lt;/<span style="color:#f92672">h1</span>&gt;
{{end}}
</code></pre></div><h2 id="templateexecutetemplate">template.ExecuteTemplate</h2>
<p>Woah! Have you noticed that now we have a bunch of HTML files using Go&rsquo;s template language syntax? If you re-run <code>$ go run main.go</code> in your terminal and visit <code>localhost:8080</code>, you won&rsquo;t see anything!</p>
<p>This is because we&rsquo;ve wrapped all of our HTML code inside these <code>define</code> and <code>template</code> blocks and our Go app does not know what to render for the user anymore. If we had just one HTML file that isn&rsquo;t completely wrapped in Go template, we would still be fine using <code>template.Execute</code>, but now we must somehow tell our Go app which template to execute.</p>
<p>Inside an HTML file, we could specify the rendering of our header by <code>{{template &quot;header&quot;}}</code>. But now our <code>layout.html</code>, which would dynamically generate either the content of <code>index</code> or <code>contact</code>, is itself wrapped in a define statement.</p>
<p>Here&rsquo;s where <code>template.ExecuteTemplate</code> comes in. We could parse as many files as we wish and then ask the parsed template to execute a specific template which it has parsed:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a6e22e">t</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">template</span>.<span style="color:#a6e22e">ParseFiles</span>(<span style="color:#f92672">...</span><span style="color:#a6e22e">files</span>)
<span style="color:#a6e22e">t</span>.<span style="color:#a6e22e">executeTemplate</span>(<span style="color:#a6e22e">w</span>, <span style="color:#e6db74">&#34;layout&#34;</span>, <span style="color:#66d9ef">nil</span>)
</code></pre></div><p>The new <code>main.go</code> looks like this:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#75715e">// app/main.go
</span><span style="color:#75715e">// Ignoring package main and import lines
</span><span style="color:#75715e"></span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">index</span>(<span style="color:#a6e22e">w</span> <span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">ResponseWriter</span>, <span style="color:#a6e22e">r</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">Request</span>) {
	<span style="color:#a6e22e">t</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">template</span>.<span style="color:#a6e22e">ParseFiles</span>(
		<span style="color:#e6db74">&#34;layouts/layout.html&#34;</span>,
		<span style="color:#e6db74">&#34;layouts/header.html&#34;</span>,
		<span style="color:#e6db74">&#34;layouts/index.html&#34;</span>,
		<span style="color:#e6db74">&#34;layouts/footer.html&#34;</span>,
	)
	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
		panic(<span style="color:#a6e22e">err</span>)
  }
  <span style="color:#75715e">// Now we must set the header to &#34;text/html&#34; to render properly
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">w</span>.<span style="color:#a6e22e">Header</span>().<span style="color:#a6e22e">Set</span>(<span style="color:#e6db74">&#34;Content-Type&#34;</span>, <span style="color:#e6db74">&#34;text/html&#34;</span>)
	<span style="color:#a6e22e">t</span>.<span style="color:#a6e22e">ExecuteTemplate</span>(<span style="color:#a6e22e">w</span>, <span style="color:#e6db74">&#34;layout&#34;</span>, <span style="color:#66d9ef">nil</span>)
}
</code></pre></div><p>We can do the same for our contact page and update our handler:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">contact</span>(<span style="color:#a6e22e">w</span> <span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">ResponseWriter</span>, <span style="color:#a6e22e">r</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">Request</span>) {
	<span style="color:#a6e22e">t</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">template</span>.<span style="color:#a6e22e">ParseFiles</span>(
		<span style="color:#e6db74">&#34;layouts/layout.html&#34;</span>,
		<span style="color:#e6db74">&#34;layouts/header.html&#34;</span>,
		<span style="color:#e6db74">&#34;layouts/contact.html&#34;</span>,
		<span style="color:#e6db74">&#34;layouts/footer.html&#34;</span>,
	)
	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
		panic(<span style="color:#a6e22e">err</span>)
  }
  <span style="color:#75715e">// Now we must set the header to &#34;text/html&#34; to render properly
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">w</span>.<span style="color:#a6e22e">Header</span>().<span style="color:#a6e22e">Set</span>(<span style="color:#e6db74">&#34;Content-Type&#34;</span>, <span style="color:#e6db74">&#34;text/html&#34;</span>)
	<span style="color:#a6e22e">t</span>.<span style="color:#a6e22e">ExecuteTemplate</span>(<span style="color:#a6e22e">w</span>, <span style="color:#e6db74">&#34;layout&#34;</span>, <span style="color:#66d9ef">nil</span>)
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">HandleFunc</span>(<span style="color:#e6db74">&#34;/&#34;</span>, <span style="color:#a6e22e">index</span>)
	<span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">HandleFunc</span>(<span style="color:#e6db74">&#34;/contact&#34;</span>, <span style="color:#a6e22e">contact</span>)
	<span style="color:#a6e22e">log</span>.<span style="color:#a6e22e">Fatal</span>(<span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">ListenAndServe</span>(<span style="color:#e6db74">&#34;:8080&#34;</span>, <span style="color:#66d9ef">nil</span>))
}
</code></pre></div><h2 id="refactor-optional">Refactor (Optional)</h2>
<p>The smart and diligent as you are, you can not tolerate duplicated code and want to follow through with the DRY (Don&rsquo;t Repeat Yourself) principle. So let&rsquo;s extract out some elements of the code above to make it cleaner while using <code>template.ExecuteTemplate</code>.</p>
<p>First, let&rsquo;s re-organize our HTML files like this:</p>
<pre><code>.
├── main.go
└── views
    ├── contact.html
    ├── index.html
    └── layouts
        ├── footer.html
        ├── header.html
        └── layout.html
</code></pre><p>Next, we&rsquo;ll use Go&rsquo;s <a href="https://golang.org/pkg/path/filepath/#Glob">filepath.Glob</a> to glob all the layout files, <code>layout</code>, <code>header</code>, and <code>footer</code>, as a slice of strings.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#75715e">// app/main.go
</span><span style="color:#75715e"></span><span style="color:#66d9ef">var</span> (
	<span style="color:#a6e22e">layoutDir</span> = <span style="color:#e6db74">&#34;views/layouts/&#34;</span>
	<span style="color:#a6e22e">fileExt</span>   = <span style="color:#e6db74">&#34;.html&#34;</span>
)

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">layoutFiles</span>() []<span style="color:#66d9ef">string</span> {
	<span style="color:#75715e">// Using the pattern &#34;layouts/*.html&#34; to glob all files
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">files</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">filepath</span>.<span style="color:#a6e22e">Glob</span>(<span style="color:#a6e22e">layoutDir</span> <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;*&#34;</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">fileExt</span>)
	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
		panic(<span style="color:#a6e22e">err</span>)
	}
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">files</span>)
	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">files</span>
}
</code></pre></div><p>Let&rsquo;s also create a new data structure <code>view</code> that we&rsquo;ll use to store all necessary information to render our HTML files and give it the <code>render</code> method:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#75715e">// app/main.go
</span><span style="color:#75715e">// Declare the pointer to view variables to be used in main()
</span><span style="color:#75715e"></span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">homeView</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">view</span>
<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">contactView</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">view</span>

<span style="color:#75715e">// This is our new data structure to store all information about our views
</span><span style="color:#75715e"></span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">view</span> <span style="color:#66d9ef">struct</span> {
	<span style="color:#a6e22e">Template</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">template</span>.<span style="color:#a6e22e">Template</span>
	<span style="color:#a6e22e">Layout</span>   <span style="color:#66d9ef">string</span>
}

<span style="color:#75715e">// This is a method for the receiver type *view
</span><span style="color:#75715e"></span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">v</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">view</span>) <span style="color:#a6e22e">render</span>(<span style="color:#a6e22e">w</span> <span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">ResponseWriter</span>, <span style="color:#a6e22e">data</span> <span style="color:#66d9ef">interface</span>{}) <span style="color:#66d9ef">error</span> {
	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">v</span>.<span style="color:#a6e22e">Template</span>.<span style="color:#a6e22e">ExecuteTemplate</span>(<span style="color:#a6e22e">w</span>, <span style="color:#a6e22e">v</span>.<span style="color:#a6e22e">Layout</span>, <span style="color:#a6e22e">data</span>)
}
</code></pre></div><p>On top of that, we&rsquo;ll create a <code>newView</code> function to generate a new view:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#75715e">// app/main.go
</span><span style="color:#75715e"></span>
<span style="color:#75715e">// newView generates a new *view with parsed template and layout type stored
</span><span style="color:#75715e"></span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">newView</span>(<span style="color:#a6e22e">layout</span> <span style="color:#66d9ef">string</span>, <span style="color:#a6e22e">files</span> <span style="color:#f92672">...</span><span style="color:#66d9ef">string</span>) <span style="color:#f92672">*</span><span style="color:#a6e22e">view</span> {
	<span style="color:#a6e22e">files</span> = append(
		<span style="color:#a6e22e">files</span>,
		<span style="color:#a6e22e">layoutFiles</span>()<span style="color:#f92672">...</span>,
	)

	<span style="color:#a6e22e">t</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">template</span>.<span style="color:#a6e22e">ParseFiles</span>(<span style="color:#a6e22e">files</span><span style="color:#f92672">...</span>)
	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
		panic(<span style="color:#a6e22e">err</span>)
	}

	<span style="color:#66d9ef">return</span> <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">view</span>{
		<span style="color:#a6e22e">Template</span>: <span style="color:#a6e22e">t</span>,
		<span style="color:#a6e22e">Layout</span>:   <span style="color:#a6e22e">layout</span>,
	}
}
</code></pre></div><p>Finally, we&rsquo;ll update our handler:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#75715e">// app/main.go
</span><span style="color:#75715e">// A helper function to panic if error occurs when rendering
</span><span style="color:#75715e"></span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">must</span>(<span style="color:#a6e22e">err</span> <span style="color:#66d9ef">error</span>) {
	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
		panic(<span style="color:#a6e22e">err</span>)
	}
}

<span style="color:#75715e">// New home handler
</span><span style="color:#75715e"></span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">index</span>(<span style="color:#a6e22e">w</span> <span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">ResponseWriter</span>, <span style="color:#a6e22e">r</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">Request</span>) {
	<span style="color:#a6e22e">w</span>.<span style="color:#a6e22e">Header</span>().<span style="color:#a6e22e">Set</span>(<span style="color:#e6db74">&#34;Content-Type&#34;</span>, <span style="color:#e6db74">&#34;text/html&#34;</span>)
	<span style="color:#a6e22e">must</span>(<span style="color:#a6e22e">homeView</span>.<span style="color:#a6e22e">render</span>(<span style="color:#a6e22e">w</span>, <span style="color:#66d9ef">nil</span>))
}

<span style="color:#75715e">// New contact handler
</span><span style="color:#75715e"></span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">contact</span>(<span style="color:#a6e22e">w</span> <span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">ResponseWriter</span>, <span style="color:#a6e22e">r</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">Request</span>) {
	<span style="color:#a6e22e">w</span>.<span style="color:#a6e22e">Header</span>().<span style="color:#a6e22e">Set</span>(<span style="color:#e6db74">&#34;Content-Type&#34;</span>, <span style="color:#e6db74">&#34;text/html&#34;</span>)
	<span style="color:#a6e22e">must</span>(<span style="color:#a6e22e">contactView</span>.<span style="color:#a6e22e">render</span>(<span style="color:#a6e22e">w</span>, <span style="color:#66d9ef">nil</span>))
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#a6e22e">homeView</span> = <span style="color:#a6e22e">newView</span>(<span style="color:#e6db74">&#34;layout&#34;</span>, <span style="color:#e6db74">&#34;views/index.html&#34;</span>)
	<span style="color:#a6e22e">contactView</span> = <span style="color:#a6e22e">newView</span>(<span style="color:#e6db74">&#34;layout&#34;</span>, <span style="color:#e6db74">&#34;views/contact.html&#34;</span>)

	<span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">HandleFunc</span>(<span style="color:#e6db74">&#34;/&#34;</span>, <span style="color:#a6e22e">index</span>)
	<span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">HandleFunc</span>(<span style="color:#e6db74">&#34;/contact&#34;</span>, <span style="color:#a6e22e">contact</span>)

	<span style="color:#a6e22e">log</span>.<span style="color:#a6e22e">Fatal</span>(<span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">ListenAndServe</span>(<span style="color:#e6db74">&#34;:8080&#34;</span>, <span style="color:#66d9ef">nil</span>))
}
</code></pre></div><p>As a final step, maybe we&rsquo;ll extract some of the above-mentioned refactoring into a new file <code>app/views/view.go</code>. That&rsquo;s left for the reader to do as a mini-exercise.</p>
<h2 id="the-end">The End</h2>
<p>Hopefully by now, you&rsquo;ll see why sometimes we might need to use <code>template.ExecuteTemplate</code> instead of <code>template.Execute</code>. These two methods are very common and will repeatedly occur in your Go web apps, so play around with the code and take all the time you need to digest the information.</p>
<p>Happy programming in Go!</p>
]]></content>
        </item>
        
        <item>
            <title>Python: Immutables Are Not Always Immutable</title>
            <link>/posts/2020/03/python-immutables-are-not-always-immutable/</link>
            <pubDate>Sun, 22 Mar 2020 11:05:25 +0100</pubDate>
            <author>kangnahua [at] gmail dot com (Nahua Kang)</author>
            <guid>/posts/2020/03/python-immutables-are-not-always-immutable/</guid>
            <description>If you know a bit of Python, you probably have heard of immutable and mutable objects (see data model). Objects can either be mutable or immutable, depending on which type they are.
Immutables and Mutables: Basics First, let&amp;rsquo;s review the basics of immutables and mutables that we all know.
Types of Mutable Objects Mutable ones can be changed after they are created. For Python, collections like list, dict, and set are mutable objects.</description>
            <content type="html"><![CDATA[<p>If you know a bit of Python, you probably have heard of <em>immutable</em> and <em>mutable</em> objects (see <a href="https://docs.python.org/3.8/reference/datamodel.html">data model</a>). Objects can either be mutable or immutable, depending on which type they are.</p>
<h2 id="immutables-and-mutables-basics">Immutables and Mutables: Basics</h2>
<p>First, let&rsquo;s review the basics of immutables and mutables that we all know.</p>
<h3 id="types-of-mutable-objects">Types of Mutable Objects</h3>
<p>Mutable ones can be changed after they are created. For Python, collections like <code>list</code>, <code>dict</code>, and <code>set</code> are mutable objects. If we create a list, we can change its elements.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">&gt;&gt;&gt;</span> lst <span style="color:#f92672">=</span> [<span style="color:#e6db74">&#34;list&#34;</span>,  <span style="color:#e6db74">&#34;objects&#34;</span>,  <span style="color:#e6db74">&#34;are&#34;</span>, <span style="color:#e6db74">&#34;immutable?&#34;</span>]
<span style="color:#f92672">&gt;&gt;&gt;</span> lst
[<span style="color:#e6db74">&#34;list&#34;</span>,  <span style="color:#e6db74">&#34;objects&#34;</span>,  <span style="color:#e6db74">&#34;are&#34;</span>, <span style="color:#e6db74">&#34;immutable?&#34;</span>]
<span style="color:#f92672">&gt;&gt;&gt;</span> lst[<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>] <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;mutable!&#34;</span>
<span style="color:#f92672">&gt;&gt;&gt;</span> lst
[<span style="color:#e6db74">&#34;list&#34;</span>,  <span style="color:#e6db74">&#34;objects&#34;</span>,  <span style="color:#e6db74">&#34;are&#34;</span>, <span style="color:#e6db74">&#34;mutable!&#34;</span>]
</code></pre></div><h3 id="types-of-immutable-objects">Types of Immutable Objects</h3>
<p>Immutable objects cannot be changed after creation. <code>bool</code>, <code>int</code>, <code>float</code>, <code>str</code>, <code>frozenset</code>, and <code>tuple</code> are immutable. So we will get an error if we attempt to reassign a tuple:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">&gt;&gt;&gt;</span> t <span style="color:#f92672">=</span> (<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>)
<span style="color:#f92672">&gt;&gt;&gt;</span> type(t)
<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">class</span> <span style="color:#960050;background-color:#1e0010">&#39;</span><span style="color:#a6e22e">tuple</span><span style="color:#e6db74">&#39;&gt;</span>
<span style="color:#f92672">&gt;&gt;&gt;</span> t[<span style="color:#ae81ff">1</span>]
<span style="color:#ae81ff">2</span>
<span style="color:#f92672">&gt;&gt;&gt;</span> t[<span style="color:#ae81ff">1</span>] <span style="color:#f92672">=</span> <span style="color:#ae81ff">3</span>
Traceback (most recent call last):
  File <span style="color:#e6db74">&#34;&lt;stdin&gt;&#34;</span>, line <span style="color:#ae81ff">1</span>, <span style="color:#f92672">in</span> <span style="color:#f92672">&lt;</span>module<span style="color:#f92672">&gt;</span>
<span style="color:#a6e22e">TypeError</span>: <span style="color:#e6db74">&#39;tuple&#39;</span> object does <span style="color:#f92672">not</span> support item assignment
</code></pre></div><p>Try create a variable that references to a string object, such as <code>string = 'hello'</code>. If you attempted to reassign one element of the string (<code>string[1] = 'h'</code>), Python console would throw the same <code>TypeError</code>.</p>
<h3 id="example-of-a-tricky-object">Example of a Tricky Object</h3>
<p>If <code>tuple</code> is immutable and <code>list</code> is mutable, what about a tuple of lists then? Is a tuple like <code>([1, 2], [3, 4])</code> mutable or immutable?</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">&gt;&gt;&gt;</span> tulip <span style="color:#f92672">=</span> ([<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>], [<span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">4</span>])    <span style="color:#75715e"># Create a tuple of two lists</span>
<span style="color:#f92672">&gt;&gt;&gt;</span> tulip
([<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>], [<span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">4</span>])
<span style="color:#f92672">&gt;&gt;&gt;</span> tulip[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">=</span> [<span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">6</span>]           <span style="color:#75715e"># Attempt to change the element results in error</span>
Traceback (most recent call last):
  File <span style="color:#e6db74">&#34;&lt;stdin&gt;&#34;</span>, line <span style="color:#ae81ff">1</span>, <span style="color:#f92672">in</span> <span style="color:#f92672">&lt;</span>module<span style="color:#f92672">&gt;</span>
<span style="color:#a6e22e">TypeError</span>: <span style="color:#e6db74">&#39;tuple&#39;</span> object does <span style="color:#f92672">not</span> support item assignment
<span style="color:#f92672">&gt;&gt;&gt;</span> tulip[<span style="color:#ae81ff">0</span>][<span style="color:#ae81ff">0</span>] <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>             <span style="color:#75715e"># Changing element of the list itself works</span>
<span style="color:#f92672">&gt;&gt;&gt;</span> tulip
([<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">2</span>], [<span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">4</span>])
</code></pre></div><h2 id="immutables-and-mutables-definitions">Immutables and Mutables: Definitions</h2>
<p>As you can see, the story is a little bit more complicated. On the one hand, we cannot reassign an element of the tuple because tuples are immutable. On the other hand, we can reassign an element of a list inside a tuple, because lists are mutable.</p>
<p>To understand this topic better, we can go deeper into the knitty gritties of Python.</p>
<h3 id="everything-in-python-is-an-object">Everything in Python is an Object</h3>
<p>In Python, everything is an object. So when you see an integer <code>1</code> or a string <code>'hello'</code>, they are objects, too. Just try typing <code>type(0)</code> or <code>type('a')</code>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">&gt;&gt;&gt;</span> type(<span style="color:#ae81ff">1</span>)
<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">class</span> <span style="color:#960050;background-color:#1e0010">&#39;</span><span style="color:#a6e22e">int</span><span style="color:#e6db74">&#39;&gt;</span>
<span style="color:#f92672">&gt;&gt;&gt;</span> type(<span style="color:#e6db74">&#39;a&#39;</span>)
<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">class</span> <span style="color:#960050;background-color:#1e0010">&#39;</span><span style="color:#a6e22e">str</span><span style="color:#e6db74">&#39;&gt;</span>
</code></pre></div><p>They are instances of the class integer and the class string.</p>
<h3 id="internal-state-and-mutability">Internal State and Mutability</h3>
<p>For an object in memory, it might contain information such as its object type and some data. In the realm of Python, changing the data inside an object is called modifying the <em><strong>internal state</strong></em> of this object. If we change the data inside an object and the object&rsquo;s memory address has not changed, the object is <em><strong>mutated</strong></em>.</p>
<p>So now we can refine our definition of Python objects&rsquo; mutability:</p>
<ul>
<li>An object whose internal state can be changed is a <em><strong>mutable</strong></em>.</li>
<li>An object whose internal state cannot be changed is an <em><strong>immutable</strong></em>.</li>
</ul>
<h3 id="immutables">Immutables</h3>
<p>As we discussed, numbers (<code>int</code>, <code>float</code>, <code>booleans</code>, etc.), strings, and tuples are immutables. An integer object, could contain the information of the type <code>class 'int'</code> and a value of <code>1</code>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">&gt;&gt;&gt;</span> type(<span style="color:#ae81ff">1</span>)
<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">class</span> <span style="color:#960050;background-color:#1e0010">&#39;</span><span style="color:#a6e22e">int</span><span style="color:#e6db74">&#39;&gt;</span>
</code></pre></div><p>When we declare a variable <code>a = 1</code>, the variable itself does not really hold the value <code>1</code>. Instead, the variable is a <em>reference</em> to a value that is an integer object <code>1</code>, which is an instance of the integer class.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">&gt;&gt;&gt;</span> a <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>
</code></pre></div><p>If this sounded a bit abstract, try think of the integer <code>1</code> as if it existed in the Python universe all along, with its own address in this universe. When we declare <code>a = 1</code>, we have simply created a name to point to this integer as a reference.</p>
<p>In a way, we could create many names for the integer <code>1</code>. Let&rsquo;s try playing with the integer object <code>1</code> inside the Python console a bit:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">&gt;&gt;&gt;</span> id(<span style="color:#ae81ff">1</span>)     <span style="color:#75715e"># The address where integer value 1 lives in</span>
<span style="color:#ae81ff">4362298512</span>
<span style="color:#f92672">&gt;&gt;&gt;</span> id(a)     <span style="color:#75715e"># The address of the value that variable &#39;a&#39; points to</span>
<span style="color:#ae81ff">4362298512</span>
<span style="color:#f92672">&gt;&gt;&gt;</span> b <span style="color:#f92672">=</span> a     <span style="color:#75715e"># Assign &#39;b&#39; to the same value that &#39;a&#39; points to</span>
<span style="color:#f92672">&gt;&gt;&gt;</span> id(b)     <span style="color:#75715e"># The address that &#39;b&#39; points to is the same that &#39;a&#39; points to</span>
<span style="color:#ae81ff">4362298512</span>
</code></pre></div><p>As you can see, the integer <code>1</code> has its own address (the exact address will most certainly differ in the universe of your computer), in this case, <code>4362298512</code>. If we assigned variable <code>a</code> to the integer object <code>1</code>, we merely declared a <em>noun</em> that references the address of <code>1</code>.</p>
<p>When we then declared another variable <code>b</code> to the variable <code>a</code>, we are literally telling Python to let the variable <code>b</code> be a reference to the same value that <code>a</code> is pointing to, which is the integer object <code>1</code>.</p>
<p>Let&rsquo;s dig deeper. If we perform the operation <code>a = a + 1</code>, we do not change the value of this integer object at the memory address of <code>4362298512</code>. Instead, Python creates another integer object with value <code>2</code>, to which we now point the variable <code>a</code>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">&gt;&gt;&gt;</span> a <span style="color:#f92672">=</span> a <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span> <span style="color:#75715e"># What happens if we add 1 to the variable &#39;a&#39;?</span>
<span style="color:#f92672">&gt;&gt;&gt;</span> id(a)     <span style="color:#75715e"># &#39;a&#39; points to a new address</span>
<span style="color:#ae81ff">4362298544</span>
<span style="color:#f92672">&gt;&gt;&gt;</span> id(<span style="color:#ae81ff">2</span>)     <span style="color:#75715e"># which is the same address that integer 2 lives on</span>
<span style="color:#ae81ff">4362298544</span>
<span style="color:#f92672">&gt;&gt;&gt;</span> id(<span style="color:#ae81ff">1</span>)     <span style="color:#75715e"># Integer 1 still lives on its own address</span>
<span style="color:#ae81ff">4362298512</span>
<span style="color:#f92672">&gt;&gt;&gt;</span> id(b)     <span style="color:#75715e"># &#39;b&#39; still points to integer 1</span>
<span style="color:#ae81ff">4362298512</span>
</code></pre></div><p>You probably realized it already: We cannot alter the internal state of the integer object 1. It is immutable. When we do <code>a = a + 1</code>, we create a new integer object <code>2</code> and re-point our variable name <code>a</code> to <code>2</code> instead of incrementing the value of <code>1</code> by 1.</p>
<h3 id="mutables">Mutables</h3>
<p>Let&rsquo;s create a class in Python called <code>Person</code>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Person</span>:
    <span style="color:#66d9ef">def</span> __init__(self, first_name, last_name, age):
        self<span style="color:#f92672">.</span>first_name <span style="color:#f92672">=</span> first_name
        self<span style="color:#f92672">.</span>last_name <span style="color:#f92672">=</span> last_name
        self<span style="color:#f92672">.</span>age <span style="color:#f92672">=</span> age
</code></pre></div><p>A <code>Person</code> object could contain the type <code>class '__main__.Person'</code>with additional data such as <code>first_name</code>, <code>last_name</code>, and <code>age</code>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">&gt;&gt;&gt;</span> nahua <span style="color:#f92672">=</span> Person(<span style="color:#e6db74">&#34;Nahua&#34;</span>, <span style="color:#e6db74">&#34;Kang&#34;</span>, <span style="color:#ae81ff">29</span>)
<span style="color:#f92672">&gt;&gt;&gt;</span> type(nahua)
<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">class</span> <span style="color:#960050;background-color:#1e0010">&#39;</span><span style="color:#a6e22e">__main__</span><span style="color:#f92672">.</span>Person<span style="color:#e6db74">&#39;&gt;</span>
<span style="color:#f92672">&gt;&gt;&gt;</span> isinstance(nahua, Person)
True
<span style="color:#f92672">&gt;&gt;&gt;</span> nahua<span style="color:#f92672">.</span>first_name
<span style="color:#e6db74">&#39;Nahua&#39;</span>
<span style="color:#f92672">&gt;&gt;&gt;</span> nahua<span style="color:#f92672">.</span>last_name
<span style="color:#e6db74">&#39;Kang&#39;</span>
<span style="color:#f92672">&gt;&gt;&gt;</span> nahua<span style="color:#f92672">.</span>age
<span style="color:#ae81ff">29</span>
</code></pre></div><p>We can go so far as to check up the address that the object <code>nahua</code> resides on in memory and see if we can alter the data inside the object:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">&gt;&gt;&gt;</span> id(nahua)
<span style="color:#ae81ff">4374562064</span>
<span style="color:#f92672">&gt;&gt;&gt;</span> nahua<span style="color:#f92672">.</span>first_name <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;nashua&#34;</span>
<span style="color:#f92672">&gt;&gt;&gt;</span> id(nahua)
<span style="color:#ae81ff">4374562064</span>
</code></pre></div><h2 id="immutable-of-mutables">Immutable of Mutables</h2>
<p>Coming back to our original, tricky example:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">&gt;&gt;&gt;</span> tulip <span style="color:#f92672">=</span> ([<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>], [<span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">4</span>])    <span style="color:#75715e"># Create a tuple of two lists</span>
<span style="color:#f92672">&gt;&gt;&gt;</span> tulip
([<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>], [<span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">4</span>])
<span style="color:#f92672">&gt;&gt;&gt;</span> id(tulip)
<span style="color:#ae81ff">140313768890112</span>
<span style="color:#f92672">&gt;&gt;&gt;</span> id(tulip[<span style="color:#ae81ff">0</span>])
<span style="color:#ae81ff">140313769534800</span>
<span style="color:#f92672">&gt;&gt;&gt;</span> id(tulip[<span style="color:#ae81ff">1</span>])
<span style="color:#ae81ff">140313768720576</span>
</code></pre></div><p>Notice that a <code>tuple</code> is immutable. So we have assigned the variable <code>tulip</code> to a tuple whose internal state contains two <code>lists</code>, each with a specific ID address.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">&gt;&gt;&gt;</span> tulip[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">=</span> [<span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">6</span>]           <span style="color:#75715e"># Cannot re-assign one element of an immutable to a new object</span>
Traceback (most recent call last):
  File <span style="color:#e6db74">&#34;&lt;stdin&gt;&#34;</span>, line <span style="color:#ae81ff">1</span>, <span style="color:#f92672">in</span> <span style="color:#f92672">&lt;</span>module<span style="color:#f92672">&gt;</span>
<span style="color:#a6e22e">TypeError</span>: <span style="color:#e6db74">&#39;tuple&#39;</span> object does <span style="color:#f92672">not</span> support item assignment
</code></pre></div><p>If we try to re-assign the first list of our tuple <code>tulip</code> to another list object, which has a different ID address, that would not work. This is because the tuple is <strong>immutable</strong>, as in we cannot change the ID addresses of the elements in its internal state.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">&gt;&gt;&gt;</span> tulip[<span style="color:#ae81ff">0</span>][<span style="color:#ae81ff">0</span>] <span style="color:#f92672">=</span> <span style="color:#ae81ff">5</span>   <span style="color:#75715e"># But that element, which is mutable, can change its elements</span>
<span style="color:#f92672">&gt;&gt;&gt;</span> tulip
([<span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">2</span>], [<span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">4</span>])
<span style="color:#f92672">&gt;&gt;&gt;</span> id(tulip[<span style="color:#ae81ff">0</span>])      <span style="color:#75715e"># The first list object&#39;s ID is not changed</span>
<span style="color:#ae81ff">140313769534800</span>       <span style="color:#75715e"># which means we did not modify the internal state of an immutable</span>
</code></pre></div><p>However, each of its two list objects is <strong>mutable</strong>, which means that we can modify their internal states legally. This is why we could modify the mutable inside an immutable.</p>
<h2 id="the-end">The End</h2>
<p>While in most cases, Python immutables are immutable and mutables are mutable. But in some cases we&rsquo;d run into immutables that contain mutable elements and it would be important to know when these cases occur. The rule of thumb is to understand the relationship between the ID of an object and the IDs of its elements in relationship to the object&rsquo;s type and mutability/immutability.</p>
<p>Hopefully this post helps you a bit. Happy programming in Python :)</p>
]]></content>
        </item>
        
    </channel>
</rss>
